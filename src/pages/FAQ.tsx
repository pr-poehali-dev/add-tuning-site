import { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from '@/components/ui/accordion';
import { Card } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import Icon from '@/components/ui/icon';
import Header from '@/components/Header';
import Footer from '@/components/Footer';

const FAQ = () => {
  const faqCategories = [
    {
      category: 'Общие вопросы',
      icon: 'HelpCircle',
      questions: [
        {
          q: 'Что такое чип-тюнинг и как он работает?',
          a: 'Чип-тюнинг — это изменение заводских настроек в блоке управления двигателем (ЭБУ). Производители автомобилей часто занижают параметры двигателя на 20-30% для увеличения ресурса и адаптации под разные рынки. Я подключаюсь к ЭБУ через диагностический разъем, считываю оригинальную прошивку, корректирую карты впрыска топлива, давления турбины, углов зажигания и другие параметры. Затем записываю оптимизированную прошивку обратно. Весь процесс занимает 2-4 часа в зависимости от модели.'
        },
        {
          q: 'Безопасен ли чип-тюнинг? Не "убью" ли я двигатель?',
          a: 'При правильном подходе чип-тюнинг абсолютно безопасен. Я работаю только в пределах технических возможностей двигателя — не поднимаю давление турбины выше допустимого, учитываю октановое число топлива, контролирую температуру. За 7 лет работы у меня не было ни одного случая поломки двигателя из-за прошивки. Главное — не лить 92-й бензин после тюнинга под 98-й и вовремя менять масло. Сохраняю оригинальную прошивку на всякий случай.'
        },
        {
          q: 'Сколько времени занимает чип-тюнинг?',
          a: 'Stage 1 обычно занимает 2-3 часа: диагностика 30 минут, считывание заводской прошивки 20-40 минут, подготовка модифицированной прошивки 30-60 минут, запись в ЭБУ 20-30 минут, тест-драйв и проверка логов 30 минут. Если нужно снимать ЭБУ (редкие модели с защитой) — добавляется 1-2 часа. Stage 2 с удалением систем может занять целый день.'
        },
        {
          q: 'Можно ли делать чип-тюнинг на автомобиле с пробегом?',
          a: 'Да, но я всегда сначала делаю диагностику. Если двигатель "здоров" (нет задиров, компрессия в норме, нет масложора), то тюнинг только пойдет на пользу. Если есть проблемы — сначала их нужно устранить. Например, если турбина уже подуставшая, то повышение буста может её добить. Делал тюнинг на машинах с пробегом 300+ тыс. км — главное состояние, а не цифры.'
        },
      ]
    },
    {
      category: 'Технические вопросы',
      icon: 'Settings',
      questions: [
        {
          q: 'Какой реальный прирост мощности я получу?',
          a: 'На бензиновых турбомоторах (TSI, TFSI) обычно +25-35% мощности и до +40% крутящего момента на Stage 1. На дизелях (TDI, CDI) прирост ещё больше — до +35-40% мощности и +50% момента, потому что дизели сильнее задушены с завода. Атмосферники дают +5-10%, там запас минимальный. Например: Golf GTI 2.0 TSI (230 л.с. сток) → 290-300 л.с., BMW 320d (190 л.с.) → 250-260 л.с. Точные цифры покажу на диностенде после прошивки.'
        },
        {
          q: 'Увеличится ли расход топлива после чип-тюнинга?',
          a: 'При спокойной езде расход либо не меняется, либо даже падает на 0.5-1 л/100км, особенно на дизелях. Почему? Двигателю нужно меньше "напрягаться" для той же скорости. Но если постоянно топить в пол, используя новую мощность, расход вырастет на 10-20%. Тут как с молотком — можно аккуратно забить гвоздь, а можно разнести всё вокруг. Лично у меня клиенты жалуются не на расход, а на то, что теперь чаще "газуют" — машина стала веселее.'
        },
        {
          q: 'Можно ли вернуть заводскую прошивку обратно?',
          a: 'Да, 100%. Я всегда делаю полный бэкап оригинальной прошивки перед любыми изменениями. Храню файлы минимум 3 года. Возврат к стоку делаю бесплатно для своих клиентов. Бывает нужно перед продажей машины или если едете к дилеру по гарантии (хотя они редко проверяют прошивку). Процедура занимает 30-40 минут.'
        },
        {
          q: 'Что такое Stage 1 и Stage 2? В чём разница?',
          a: 'Stage 1 — это только программная оптимизация без замены железа. Меняю карты в ЭБУ, работаю со штатными компонентами. Безопасно, обратимо, не требует доработок. Stage 2 — это прошивка под доработанное железо: спортивный даунпайп, увеличенный интеркулер, усиленная турбина. Даёт +40-50% мощности, но требует вложений в запчасти. Stage 1 подходит 95% клиентов — баланс цена/результат идеальный.'
        },
        {
          q: 'Нужно ли менять сцепление после чип-тюнинга?',
          a: 'Зависит от момента и состояния сцепления. Если на стоке крутящий момент был 350 Нм, а после тюнинга стал 450-500 Нм, то сцепление может начать пробуксовывать при резких стартах. Обычно штатное сцепление держит прирост до 100 Нм. Если сцепление уже изношено — лучше сразу поставить усиленное. На АКПП и DSG обычно проблем нет, они запасом прочности.'
        },
      ]
    },
    {
      category: 'Удаление систем',
      icon: 'Trash2',
      questions: [
        {
          q: 'Зачем удалять сажевый фильтр (DPF/FAP)?',
          a: 'DPF забивается сажей и требует дорогостоящей регенерации или замены (40-150 тыс. руб.). При городской езде фильтр не успевает прожигаться и со временем полностью забивается — машина теряет тягу, дымит, жрёт масло. Я физически вырезаю или выбиваю керамику из фильтра, ставлю пламегаситель и программно отключаю DPF в ЭБУ. После этого машина "дышит" свободно, тяга возвращается, регенераций больше нет. Легально? Серая зона, но на техосмотре не проверяют.'
        },
        {
          q: 'Что даёт отключение EGR?',
          a: 'EGR (рециркуляция выхлопных газов) — экологическая система, которая возвращает часть выхлопа обратно во впуск для снижения температуры и выбросов NOx. Проблема: EGR засоряет впускной коллектор сажей, образуется нагар, падает мощность. Клапан EGR часто заклинивает — появляются ошибки. Я заглушаю клапан физически и отключаю в прошивке. Результат: чистый впуск, нет ошибок, двигатель работает стабильнее.'
        },
        {
          q: 'AdBlue/SCR — стоит ли удалять систему?',
          a: 'AdBlue — это мочевина, которая впрыскивается в выхлоп для нейтрализации NOx на современных дизелях Евро-5/6. Проблемы: дорогая жидкость (расход 1-2 литра на 1000 км), система часто ломается (датчики, форсунки, насосы) — ремонт от 50 до 200 тыс. руб. Если AdBlue кончится, машина может уйти в аварийный режим (ограничение мощности). Я программно эмулирую исправную систему — ЭБУ "думает", что всё работает. Бак AdBlue можно не заправлять.'
        },
        {
          q: 'Что такое перевод на Евро-2 и зачем это нужно?',
          a: 'Евро-2 — это отключение всех экологических систем на программном уровне: катализаторы, лямбда-зонды, EGR, DPF. После перевода можно установить простой пламегаситель вместо катализатора (экономия 20-80 тыс. руб.), машина не будет выдавать ошибки. Подходит для старых авто, где экология уже сыпется и дорого ремонтировать. Техосмотр пройдёте, если дымность в норме.'
        },
        {
          q: 'Иммобилайзер OFF — когда это нужно?',
          a: 'Иммобилайзер — противоугонная система, "привязывающая" ключ к ЭБУ. Отключение нужно, если: 1) Потеряли ключи и новый не прописывается. 2) Меняли ЭБУ после залития/пожара — новый блок не видит родной ключ. 3) Глюки иммобилайзера — машина не заводится. Я отключаю проверку в ЭБУ, после этого машина заводится любым ключом или даже без чипа (механически).'
        },
      ]
    },
    {
      category: 'Гарантия и безопасность',
      icon: 'Shield',
      questions: [
        {
          q: 'Какая гарантия на чип-тюнинг?',
          a: 'Даю гарантию 1 год на прошивку: если появятся ошибки, связанные с программой (а не с поломкой железа), исправлю бесплатно. Если что-то пойдёт не так в первые 2 недели (редко, но бывает — адаптация ЭБУ) — приезжайте, доработаю. На железо (турбина, форсунки, поршни) гарантию не даю — это не зависит от прошивки. Но за 7 лет не было ни одного двигателя, который "умер" из-за моей работы.'
        },
        {
          q: 'Что делать, если после тюнинга загорелся Check Engine?',
          a: 'Сразу звоните мне. 99% случаев — это не критично. Либо ЭБУ адаптируется к новым параметрам (первые 50-100 км), либо какой-то датчик "не нравится" новый режим работы (например, лямбда). Подключу сканер, посмотрю логи, скорректирую прошивку или отключу неактуальный датчик. Если это поломка железа (редко) — помогу диагностировать. Первые 2 недели любые правки бесплатно.'
        },
        {
          q: 'Узнает ли дилер о чип-тюнинге?',
          a: 'Зависит от марки и как проверяют. У VAG (VW, Audi, Skoda, Seat) есть CVN/ASW — контрольная сумма прошивки. Если дилер специально проверит — увидят. Но обычно не проверяют, если не лезете по гарантии с проблемами двигателя. У BMW, Mercedes, Ford проверку делают реже. Если боитесь — можно перед визитом к дилеру вернуть сток (делаю бесплатно), а после опять зашить тюнинг. На практике 90% клиентов ездят с тюнингом и дилеры ничего не замечают.'
        },
        {
          q: 'Можно ли делать тюнинг на автомобиле на гарантии?',
          a: 'Технически — да, но официальная гарантия слетит, если дилер обнаружит вмешательство в ЭБУ. Обычно дилеры не проверяют, если не лезете с проблемами мотора/коробки. Если едете по гарантии — лучше сначала сделать возврат на сток. Многие клиенты ездят 2-3 года на гарантии с тюнингом без проблем. Но риск есть — решать вам. Я предупреждаю честно: гарантия дилера может сгореть.'
        },
      ]
    },
    {
      category: 'Стоимость и процесс',
      icon: 'CreditCard',
      questions: [
        {
          q: 'Сколько стоит чип-тюнинг Stage 1?',
          a: 'От 7 000 до 25 000 рублей в зависимости от модели и сложности доступа к ЭБУ. Простые VAG (VW, Audi, Skoda) — от 7 000₽, BMW/Mercedes дизели — от 10 000₽, редкие модели или если нужно снимать ЭБУ — от 15 000₽. В цену входит: диагностика, бэкап оригинала, прошивка, тест-драйв. Дополнительно можете заказать удаление DPF/EGR (+5-10 тыс.), отключение AdBlue (+15-20 тыс.).'
        },
        {
          q: 'Какие способы оплаты принимаете?',
          a: 'Наличные, переводом на карту (Сбер), по QR-коду. Для юрлиц могу выставить счёт. Оплата после выполнения работы и тест-драйва — если не понравится, можем вернуть стоковую прошивку. Никаких предоплат не беру.'
        },
        {
          q: 'Нужна ли предварительная запись?',
          a: 'Да, лучше записаться заранее за 1-3 дня, чтобы я подготовил прошивку под вашу модель и освободил время. Работаю по адресу: Тольятти, Пр-кт Степана Разина, 50. Время работы обычно с 10:00 до 20:00, но можем договориться индивидуально. Пишите в WhatsApp или звоните +7 (937) 213-45-47.'
        },
        {
          q: 'Можно ли сделать чип-тюнинг выездом?',
          a: 'На некоторых моделях да — если ЭБУ считывается через OBD (диагностический разъём). Беру с собой ноутбук, программаторы, кабели. Выезд по Тольятти — доплата 1000₽. Если нужно снимать ЭБУ или паять — только в мастерской. Уточняйте по вашей модели.'
        },
      ]
    },
  ];

  return (
    <div className="min-h-screen">
      <Header />
      
      <section className="pt-32 pb-20 px-4 bg-gradient-to-br from-background via-background to-primary/10">
        <div className="container mx-auto">
          <div className="max-w-3xl mx-auto text-center mb-16 animate-fade-in">
            <h1 className="text-5xl md:text-6xl font-bold mb-6">Часто задаваемые вопросы</h1>
            <p className="text-xl text-muted-foreground">
              Честные и подробные ответы на все вопросы о чип-тюнинге
            </p>
          </div>

          <div className="max-w-4xl mx-auto space-y-8">
            {faqCategories.map((category, index) => (
              <Card key={index} className="p-6 animate-fade-in" style={{ animationDelay: `${index * 100}ms` }}>
                <div className="flex items-center gap-3 mb-6">
                  <div className="w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center">
                    <Icon name={category.icon as any} size={24} className="text-primary" />
                  </div>
                  <h2 className="text-2xl font-bold">{category.category}</h2>
                </div>
                
                <Accordion type="single" collapsible className="w-full">
                  {category.questions.map((item, idx) => (
                    <AccordionItem key={idx} value={`item-${index}-${idx}`}>
                      <AccordionTrigger className="text-left text-lg font-semibold hover:text-primary">
                        {item.q}
                      </AccordionTrigger>
                      <AccordionContent className="text-muted-foreground leading-relaxed">
                        {item.a}
                      </AccordionContent>
                    </AccordionItem>
                  ))}
                </Accordion>
              </Card>
            ))}
          </div>

          <div className="mt-16 bg-card rounded-2xl p-8 max-w-3xl mx-auto text-center">
            <Icon name="MessageCircleQuestion" size={48} className="text-primary mx-auto mb-4" />
            <h3 className="text-2xl font-bold mb-4">Остались вопросы?</h3>
            <p className="text-muted-foreground mb-6">
              Напишите в WhatsApp — отвечу на все вопросы, помогу определиться с выбором услуги
            </p>
            <a
              href="https://wa.me/79372134547?text=Здравствуйте!%20У%20меня%20есть%20вопрос%20по%20чип-тюнингу"
              target="_blank"
              rel="noopener noreferrer"
              className="inline-flex items-center justify-center px-8 py-4 bg-primary text-primary-foreground rounded-lg font-semibold hover:bg-primary/90 transition-colors text-lg"
            >
              <Icon name="MessageCircle" size={24} className="mr-2" />
              Написать в WhatsApp
            </a>
          </div>
        </div>
      </section>

      <Footer />
    </div>
  );
};

export default FAQ;